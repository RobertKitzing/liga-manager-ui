<div class="flex justify-center h-full">
    <div class="w-full sm:w-3/4">
        <div class="m-4">
            <mat-form-field class="w-full" subscriptSizing="dynamic">
                <mat-label translate>SEARCH_TEAM</mat-label>
                <input matInput [formControl]="searchTeam" />
            </mat-form-field>
        </div>
        @if (teams$ | async; as teams) {
        <table mat-table [dataSource]="teams">
            <ng-container matColumnDef="team">
                <th class="pt-4" mat-header-cell *matHeaderCellDef>
                    @if (addTeamMode) {
                    <mat-form-field class="w-full">
                        <mat-label translate>NEW_TEAM</mat-label>
                        <input
                            matInput
                            [formControl]="newTeam"
                            (keyup.enter)="addNewTeam(newTeam.value!)"
                            cySelector="input-create-team-name"
                        />
                    </mat-form-field>
                    } @if (!addTeamMode) {
                    <span translate>TEAM_NAME</span>
                    }
                </th>
                <td mat-cell *matCellDef="let team">
                    @if (editTeamId === team.id) {
                    <mat-form-field
                        class="w-full pt-4 pb-4"
                        subscriptSizing="dynamic"
                    >
                        <mat-label translate>TEAM_NAME</mat-label>
                        <input
                            matInput
                            [formControl]="newTeamName"
                            (keyup.enter)="
                                renameTeam(team.id, newTeamName.value!)
                            "
                            [value]="team.name"
                        />
                    </mat-form-field>
                    } @if (editTeamId !== team.id) {
                    {{ team.name }}
                    }
                </td>
            </ng-container>
            <ng-container matColumnDef="action">
                <th class="text-end" mat-header-cell *matHeaderCellDef>
                    @if (addTeamMode) {
                    <button
                        mat-icon-button
                        (click)="addNewTeam(newTeam.value!)"
                        [disabled]="!newTeam.valid"
                        cySelector="button-create-team-submit"
                    >
                        <mat-icon> add </mat-icon>
                    </button>
                    <button mat-icon-button (click)="addTeamMode = false">
                        <mat-icon> cancel </mat-icon>
                    </button>
                    } @if (!addTeamMode) {
                    <button
                        mat-icon-button
                        (click)="addTeamMode = true"
                        cySelector="button-create-team"
                    >
                        <mat-icon> add </mat-icon>
                    </button>
                    }
                </th>
                <td class="text-end" mat-cell *matCellDef="let team">
                    @if (editTeamId !== team.id) {
                    <button mat-icon-button (click)="editTeam(team)">
                        <mat-icon>edit</mat-icon>
                    </button>
                    } @if (editTeamId === team.id) {
                    <button
                        mat-icon-button
                        (click)="renameTeam(team.id, newTeamName.value!)"
                        [disabled]="!newTeamName.valid"
                    >
                        <mat-icon>save</mat-icon>
                    </button>
                    <button mat-icon-button (click)="deleteTeam(team.id)">
                        <mat-icon> delete </mat-icon>
                    </button>
                    <button mat-icon-button (click)="editTeamId = ''">
                        <mat-icon> cancel </mat-icon>
                    </button>
                    }
                </td>
            </ng-container>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        </table>
        }
    </div>
</div>
