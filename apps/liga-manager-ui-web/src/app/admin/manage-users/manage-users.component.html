<div class="flex justify-center">
    <mat-card class="w-full sm:w-3/4 m-2">
        <mat-card-title>
            <div class="flex items-center m-4">
                <mat-form-field class="grow pr-6" subscriptSizing="dynamic">
                    <mat-label translate>SEARCH</mat-label>
                    <input matInput [formControl]="searchUser" />
                </mat-form-field>
                <button mat-stroked-button (click)="createUser()" cySelector="button-create-user">
                    <mat-icon>save</mat-icon>
                    {{ "BUTTON.CREATE_USER" | translate }}
                </button>
            </div>
        </mat-card-title>
        <mat-card-content>
            <div class="flex justify-center h-full">
            <div class="w-full">
                @if (users$ | async; as users) {
                    <table mat-table [dataSource]="users">
                        <ng-container matColumnDef="email">
                            <th mat-header-cell *matHeaderCellDef>
                                <!-- <span translate>USER</span> -->
                            </th>
                            <td mat-cell *matCellDef="let user">
                                <div class="grid grid-cols-2 mt-2 mb-2 gap-2">
                                    <div translate>EMAIL</div>
                                    <div>{{ user.email }}</div>
                                    <div translate>FIRST_NAME</div>
                                    <div>{{ user.first_name }}</div>
                                    <div translate>LAST_NAME</div>
                                    <div>{{ user.last_name }}</div>
                                    <div translate>TEAMS</div>
                                    <div class="flex flex-col">
                                        @for (team of user.teams; track team) {
                                        <div>
                                            <p>{{ team.name }}</p>
                                        </div>
                                        }
                                    </div>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="action">
                            <th class="text-end" mat-header-cell *matHeaderCellDef>
                            </th>
                            <td class="text-end" mat-cell *matCellDef="let user">
                                <button mat-icon-button (click)="editUser(user)">
                                    <mat-icon>edit</mat-icon>
                                </button>
                                <button
                                    mat-icon-button
                                    (click)="sendPasswordMail(user.email)"
                                >
                                    <mat-icon>mail</mat-icon>
                                </button>
                            </td>
                        </ng-container>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    </table>
                }
            </div>
        </div>
        </mat-card-content>
    </mat-card>
</div>