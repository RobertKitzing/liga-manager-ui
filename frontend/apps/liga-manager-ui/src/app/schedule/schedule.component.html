<div class="flex justify-center h-full">
    <div class="w-full lg:w-2/3">
        <div
            class="flex justify-center mt-2"
            [ngClass]="{ 'mb-2': !showFilter }"
        >
            <mat-toolbar>
                <div class="w-full flex justify-between">
                    <div class="w-full lg:w-1/3 self-center">
                        <lima-season-chooser
                            [selectedSeasonFC]="selectedSeasonFC"
                            [filterSeasonStates]="filterSeasonStates"
                        ></lima-season-chooser>
                    </div>
                    <button
                        class="self-center ml-4"
                        mat-icon-button
                        (click)="showFilter = !showFilter"
                    >
                        <mat-icon>filter_list</mat-icon>
                    </button>
                </div>
            </mat-toolbar>
        </div>
        @if ((season$ | async); as season) { @if (showFilter) {
        <div class="w-full grid grid-cols-1 lg:grid-cols-2 p-2 gap-4 mb-2">
            <mat-select
                class="text-center"
                #matchDaySelect
                [(value)]="selectedMatchDayId"
                placeholder="{{ 'PLACEHOLDER.SELECT_MATCHDAY' | translate }}"
            >
                <mat-option [value]="'0'">
                    {{ "ALL_MATCHDAYS" | translate }}
                </mat-option>
                @for (matchDay of season.match_days; track matchDay) {
                <mat-option [value]="matchDay?.id">
                    @if (matchDay) {
                    <div>
                        {{
                            "MATCHDAY"
                                | translate : { matchDay: matchDay?.number }
                        }}
                        ({{ matchDay.start_date | customDate }}&nbsp;-&nbsp;{{
                            matchDay.end_date | customDate
                        }})
                    </div>
                    }
                </mat-option>
                }
            </mat-select>
            <mat-select
                class="text-center"
                #teamSelect
                [(value)]="selectedTeamId"
                placeholder="{{ 'PLACEHOLDER.SELECT_TEAM' | translate }}"
            >
                <mat-option [value]="'0'">
                    {{ "ALL_TEAMS" | translate }}
                </mat-option>
                @for (team of season.teams; track team) {
                <mat-option [value]="team?.id">
                    {{ team?.name }}
                </mat-option>
                }
            </mat-select>
        </div>
        } @for (matchDay of filterMatchDays(season.match_days!); track matchDay)
        {
        <h3 class="text-center mat-sys-primary p-4">
            {{ "MATCHDAY" | translate : { matchDay: matchDay?.number } }} ({{
                matchDay?.start_date | customDate
            }}&nbsp;-&nbsp;{{ matchDay?.end_date | customDate }})
        </h3>
        <div class="flex justify-center">
            <div class="w-full">
                @for (match of filterMatches(matchDay?.matches); track match) {
                <lima-match [match]="match" [matchDay]="matchDay"></lima-match>
                }
            </div>
        </div>
        } }
    </div>
</div>
