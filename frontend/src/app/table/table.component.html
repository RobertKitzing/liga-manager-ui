<div class="flex justify-center h-full">
    <div class="w-full sm:w-3/4">
        <mat-toolbar class="bg-gray-100">
            <div class="w-full lg:w-1/2">
                <lima-season-chooser></lima-season-chooser>
            </div>
        </mat-toolbar>
        <ng-container *ngIf="ranking$ | async as ranking">
            <table mat-table [dataSource]="ranking" multiTemplateDataRows>
                <ng-container matColumnDef="position">
                    <th class="w-1 bg-theme text-theme-cdefault" mat-header-cell *matHeaderCellDef>#</th>
                    <td class="w-1" mat-cell *matCellDef="let element">{{element.sort_index}}</td>
                </ng-container>
                
                <ng-container matColumnDef="team">
                    <th class="bg-theme text-theme-cdefault" mat-header-cell *matHeaderCellDef>
                        <span translate>TEAM_NAME</span>
                    </th>
                    <td mat-cell *matCellDef="let element">{{element.team.name}}</td>
                </ng-container>
                
                <ng-container matColumnDef="games">
                    <th class="w-1 bg-theme text-theme-cdefault" mat-header-cell *matHeaderCellDef>
                        <span class="sm:hidden">{{ 'GAMES' | translate | truncate }}</span>
                        <span class="hidden sm:flex" translate>GAMES</span>
                    </th>
                    <td class="w-1" mat-cell *matCellDef="let element">{{element.matches}}</td>
                </ng-container>
                
                <ng-container matColumnDef="wins-draws-losses">
                    <th class="w-1 bg-theme text-theme-cdefault hidden sm:table-cell" mat-header-cell *matHeaderCellDef>
                        <span translate>WINS_DRAWS_LOSSES</span>
                    </th>
                    <td class="w-1 hidden sm:table-cell" mat-cell *matCellDef="let element">
                        <span>{{element.wins}}:{{element.draws}}:{{element.losses}}</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="goals">
                    <th class="w-1 bg-theme text-theme-cdefault hidden sm:table-cell" mat-header-cell *matHeaderCellDef>
                        <span translate>SCORED_CONCEDED</span>
                    </th>
                    <td class="w-1 hidden sm:table-cell" mat-cell *matCellDef="let element">
                        <span>{{element.scored_goals}}:{{element.conceded_goals}} ({{element.scored_goals - element.conceded_goals}})</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="points">
                    <th class="w-1 bg-theme text-theme-cdefault" mat-header-cell *matHeaderCellDef>
                        <span class="sm:hidden"> {{ 'POINTS' | translate | truncate }} </span>
                        <span class="hidden sm:flex" translate>POINTS</span>
                    </th>
                    <td class="w-1" mat-cell *matCellDef="let element">{{element.points}}</td>
                </ng-container>
                
                <ng-container matColumnDef="expandedDetail">
                    <td mat-cell *matCellDef="let element" [attr.colspan]="6">
                        <div [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                            <div class="flex justify-center">
                                <div class="grid grid-cols-2 gap-x-4">
                                    <span translate>WINS_DRAWS_LOSSES</span>
                                    <span translate>SCORED_CONCEDED</span>
                                    <span>{{element.wins}}:{{element.draws}}:{{element.losses}}</span>
                                    <span>{{element.scored_goals}}:{{element.conceded_goals}} ({{element.scored_goals - element.conceded_goals}})</span>
                                </div>
                            </div>
                        </div>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let element; columns: displayedColumns;"
                    (click)="expandedElement = expandedElement === element ? null : element"
                    class="sm:pointer-events-none [&>td]:border-none"
                ></tr>

                <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="h-0"></tr>
            </table>
        </ng-container>
    </div>
</div>