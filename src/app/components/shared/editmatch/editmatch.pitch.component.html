<div *ngIf="match" class="container-fluid">
  <h3 mat-dialog-title class="text-center"> {{ match.home_team.name }} - {{ match.guest_team.name }} </h3>
  <mat-dialog-content>
    <div class="row" style="justify-content: center;">
      <div class="col" style="text-align: center;">
        <div *ngIf="!match.pitch">
          <i class="material-icons">
            location_off
          </i>
          {{ 'NO_PTICH_SET' | translate }}
        </div>
        <div *ngIf="match.pitch">
          <span *ngIf="newMatchPitch">{{ 'OLD_PITCH' | translate }}:</span>
          <a href="https://www.google.com/maps/?q={{match.pitch.location_latitude}},{{match.pitch.location_longitude}}" target="_blank"
            style="cursor: pointer;">
            {{ match.pitch.label }}
            <i class="material-icons">
              location_on
            </i>
          </a>
        </div>
        <div *ngIf="newMatchPitch">
          <span>{{ 'NEW_PITCH' | translate}}:</span>
          <a href="https://www.google.com/maps/?q={{newMatchPitch.location_latitude}},{{newMatchPitch.location_longitude}}" target="_blank"
            style="cursor: pointer;">
            {{ newMatchPitch.label }}
            <i class="material-icons">
              location_on
            </i>
          </a>
        </div>
      </div>
    </div>
    <div class="row" style="justify-content: center;">
      <mat-form-field style="width: 100%;">
        <input matInput placeholder="{{ 'PITCH' | translate }}" [(ngModel)]="newMatchPitch" [matAutocomplete]="pitchAutoComplete"
          [formControl]="stateCtrl" />
        <mat-autocomplete #pitchAutoComplete [displayWith]="displayPitch">
          <mat-option *ngFor="let pitch of filteredPitches | async" [value]="pitch">
            <span>{{ pitch.label }}</span>
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>
    <div class="row">
      <div class="col" style="text-align:center;">
        <button mat-button (click)="showCreateNewPitch = !showCreateNewPitch">
          {{ 'BUTTON.CREATE_PITCH' | translate}}
          <i class="material-icons">
            add
          </i>
        </button>
      </div>
    </div>
    <div class="row" *ngIf="showCreateNewPitch">
      <mat-horizontal-stepper [linear]="true">
        <mat-step [stepControl]="newPitchFormControl">
          <ng-template matStepLabel>{{ 'NEW_PITCH_LABEL' | translate }}</ng-template>
          <mat-form-field>
            <input matInput placeholder="Pitch Label" [formControl]="newPitchFormControl" [(ngModel)]="newPitch.label" required (change)="checkNewPitchName()"
            />
            <mat-error *ngIf="newPitchFormControl.errors && newPitchFormControl.errors.pitchexist" translate>ERRORS.PITCH_EXIST</mat-error>
            <mat-error *ngIf="newPitchFormControl.errors && newPitchFormControl.errors.required" translate>PITCH_REQUIRED</mat-error>
          </mat-form-field>
          <span matTooltip="{{ 'UNIQUE_NAME_PITCH_TOOLTIP' | translate }}">
            <i class="fa fa-info"></i>
          </span>
          <div>
            <button mat-button matStepperNext (click)="onShowCreateNewPitch()" [disabled]="!newPitchFormControl.valid">{{'BUTTON.NEXT' | translate}}</button>
          </div>
        </mat-step>
        <mat-step [stepControl]="newPitchPlaceFormGroup">
          <form [formGroup]="newPitchPlaceFormGroup">
            <ng-template matStepLabel>{{ 'NEW_PITCH_ADRESS' | translate}}</ng-template>
            <mat-form-field style="width: 100%;">
              <input #adressAutoComplete matInput placeholder="{{ 'NEW_PITCH_ADRESS' | translate }}" formControlName="newpitchplace" required/>
            </mat-form-field>
            <div>
              <button mat-button matStepperPrevious>{{'BUTTON.BACK' | translate}}</button>
              <button mat-button matStepperNext (click)="createNewPitch()" [disabled]="!newPitchPlaceFormGroup.valid">{{'BUTTON.CREATE_PITCH' | translate}}</button>
            </div>
          </form>
        </mat-step>
      </mat-horizontal-stepper>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions align="center">
    <button mat-button mat-dialog-close>{{ 'BUTTON.CANCEL' | translate }}</button>
    <button mat-button (click)="onSaveClicked()">{{ 'BUTTON.SAVE' | translate}}</button>
  </mat-dialog-actions>
</div>