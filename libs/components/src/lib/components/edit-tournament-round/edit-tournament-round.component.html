<mat-card>
    <mat-card-title>
        <div class="flex justify-between">
            <div class="text-center m-2 grow">
                @if (createNext()) {
                    <span>{{'EDITING_ROUND' | translate: { round: round()?.number! + 1 } }}</span>
                }
            </div>
        </div>
    </mat-card-title>
    <mat-card-content>
        <div class="flex justify-evenly items-center flex-col md:flex-row space-x-0 md:space-x-4">
            <mat-form-field class="w-full" subscriptSizing="dynamic">
                <mat-label translate>TOURNAMENT_ROUND_FROM_DATE</mat-label>
                <mat-date-range-input [formGroup]="roundDates" [rangePicker]="roundDatesPicker">
                    <input matStartDate formControlName="from">
                    <input matEndDate formControlName="to">
                </mat-date-range-input>
                <mat-datepicker-toggle matIconSuffix [for]="roundDatesPicker"></mat-datepicker-toggle>
                <mat-date-range-picker #roundDatesPicker></mat-date-range-picker>
            </mat-form-field>
            <!-- <div class="w-full">
                <mat-form-field class="w-full" subscriptSizing="dynamic">
                    <mat-label translate>TOURNAMENT_ROUND_FROM_DATE</mat-label>
                    <input matInput [matDatepicker]="startDatePicker"
                        cySelector="input-tournament-round-from-date"
                        [formControl]="roundDates.controls.from">
                    <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
                    <mat-datepicker #startDatePicker></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="">-</div>
            <div class="w-full">
                <mat-form-field class="w-full" subscriptSizing="dynamic">
                    <mat-label translate>TOURNAMENT_ROUND_TO_DATE</mat-label>
                    <input matInput [matDatepicker]="endDatePicker"
                        cySelector="input-tournament-round-to-date"
                        [formControl]="roundDates.controls.to">
                    <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
                    <mat-datepicker #endDatePicker></mat-datepicker>
                </mat-form-field>
            </div> -->
        </div>
        <div class="flex justify-evenly items-center flex-col md:flex-row space-x-0 md:space-x-4 mt-4">
            <div class="w-full">
                <div>
                    @if(teamService.allTeams$ | async; as teams) {
                        <lima-team-auto-complete
                            cySelector="input-team-auto-complete-home"
                            [teams]="teams"
                            [fromControl]="newMatch.controls.home"
                            >
                        </lima-team-auto-complete>
                    }
                </div>
            </div>
            <div>-</div>
            <div class="w-full">
                <div>
                    @if(teamService.allTeams$ | async; as teams) {
                        <lima-team-auto-complete class="mb-2"
                            cySelector="input-team-auto-complete-guest"
                            [teams]="teams"
                            [fromControl]="newMatch.controls.guest">
                        </lima-team-auto-complete>
                    }
                </div>
            </div>
        </div>
        <div class="flex justify-center mt-4 mb-4">
            <button matButton="outlined" (click)="addMatch()" [disabled]="!newMatch.valid" cySelector="button-add-match-to-tournament-round">
                <mat-icon>add</mat-icon>
                <span translate>BUTTON.ADD_MATCH</span>
            </button>
        </div>
        <div>
            @for( match of matches(); track match ) {
                @if(match) {
                    <div class="flex items-center">
                        <div class="grow">
                            <lima-match
                                [match]="match"
                                [matchDay]="round()!"
                                [markLooser]="false"
                                [resultOnly]="true"
                            ></lima-match>
                        </div>
                        <div>
                            <button matIconButton (click)="deleteMatch(match)">
                                <mat-icon>delete</mat-icon>
                            </button>
                        </div>
                    </div>
                }
            }
        </div>
    </mat-card-content>
    <mat-card-footer>
        <div class="flex justify-evenly m-3">
            <button matButton="outlined" (click)="roundEdited.emit(false)">
                <mat-icon>close</mat-icon>
                <span translate>BUTTON.CANCEL</span>
            </button>
            <button matButton="outlined" (click)="saveRound()" [disabled]="matches().length === 0 && roundDates.valid" cySelector="button-save-tournament-round">
                <mat-icon>save</mat-icon>
                <span translate>SAVE_ROUND</span>
            </button>
        </div>
    </mat-card-footer>
</mat-card>